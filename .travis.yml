language: node_js
node_js:
- "6"
- "8"
- "9"
- "10"
sudo: false
before_deploy:
- git remote set-url origin https://${GH_TOKEN}@github.com/ReidWeb/aws-cloudfront-s3-deploy/
- git fetch
-  git checkout master
- git config --global user.name 'Travis CI[bot]'
- git config --global user.email 'travis@reidweb.com'
- npm run release
deploy:
  provider: npm
  email: peter@reidweb.com
  tag: latest
  skip_cleanup: true
  on:
    tags: false
    condition: '$TRAVIS_COMMIT_MESSAGE != *"chore(release)"*'
    node: 8
    repo: ReidWeb/aws-cloudfront-s3-deploy
    branch: master
after_deploy:
- git push --tags origin master
git:
  depth: 10